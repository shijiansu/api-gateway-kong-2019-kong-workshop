<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Lab Gateway 09 (OpenID Connect) - Kong Labs</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" href="https://training.apim.eu/favicon.png">
  <link rel="stylesheet" href="/css/style.min.a71c6f6ee0528d09894ceafb0c5e48079976456747e6712511899d6fb657ca2f.css">
</head>

<body class='page page-default-single'>
  <div id="main-menu-mobile" class="main-menu-mobile">
    <ul>
      <li class="menu-item-lab environment">
        <a href="/env">
          <span>Lab Environment</span>
        </a>
      </li>
      <li class="menu-item-labs">
        <a href="/labs">
          <span>Labs</span>
        </a>
      </li>
      <li class="menu-item-ðŸ”— documentation">
        <a href="https://docs.konghq.com/enterprise/">
          <span>ðŸ”— Documentation</span>
        </a>
      </li>
      <li class="menu-item-ðŸ”— plugins hub">
        <a href="https://docs.konghq.com/hub/">
          <span>ðŸ”— Plugins Hub</span>
        </a>
      </li>
      <li class="menu-item-ðŸ”— github">
        <a href="https://github.com/kong">
          <span>ðŸ”— Github</span>
        </a>
      </li>
    </ul>
  </div>
  <div class="wrapper">
    <div class='header'>
      <div class="container">
        <div class="logo">
          <a href="https://training.apim.eu/"><img alt="Logo" src="/images/kong.png" /></a>
        </div>
        <div class="logo-mobile">
          <a href="https://training.apim.eu/"><img alt="Logo" src="/images/kong.png" /></a>
        </div>
        <div id="main-menu" class="main-menu">
          <ul>
            <li class="menu-item-lab environment">
              <a href="/env">
                <span>Lab Environment</span>
              </a>
            </li>
            <li class="menu-item-labs">
              <a href="/labs">
                <span>Labs</span>
              </a>
            </li>
            <li class="menu-item-ðŸ”— documentation">
              <a href="https://docs.konghq.com/enterprise/">
                <span>ðŸ”— Documentation</span>
              </a>
            </li>
            <li class="menu-item-ðŸ”— plugins hub">
              <a href="https://docs.konghq.com/hub/">
                <span>ðŸ”— Plugins Hub</span>
              </a>
            </li>
            <li class="menu-item-ðŸ”— github">
              <a href="https://github.com/kong">
                <span>ðŸ”— Github</span>
              </a>
            </li>
          </ul>
        </div>
        <button id="toggle-main-menu-mobile" class="hamburger hamburger--slider" type="button">
          <span class="hamburger-box">
            <span class="hamburger-inner"></span>
          </span>
        </button>
      </div>
    </div>
    <div class="container pt-2 pt-md-6 pb-3 pb-md-6">
      <div class="row">
        <div class="col-12 col-md-3 mb-3">
          <div class="sidebar">
            <div class="docs-menu">
              <h4>Solutions</h4>
              <ul>
                <li class="">
                  <a href="https://training.apim.eu/solutions/lab_gateway_01/">Lab Gateway 01 (Routes and Services)</a>
                </li>
                <li class="">
                  <a href="https://training.apim.eu/solutions/lab_gateway_02/">Lab Gateway 02 (Caching)</a>
                </li>
                <li class="">
                  <a href="https://training.apim.eu/solutions/lab_gateway_03/">Lab Gateway 03 (Key Authentication)</a>
                </li>
                <li class="">
                  <a href="https://training.apim.eu/solutions/lab_gateway_04/">Lab Gateway 04 (Rate Limiting)</a>
                </li>
                <li class="">
                  <a href="https://training.apim.eu/solutions/lab_gateway_05/">Lab Gateway 05 (Rate limiting and free
                    access)</a>
                </li>
                <li class="">
                  <a href="https://training.apim.eu/solutions/lab_gateway_06/">Lab Gateway 06 (Access control lists)</a>
                </li>
                <li class="">
                  <a href="https://training.apim.eu/solutions/lab_gateway_07/">Lab Gateway 07 (Basic authentication)</a>
                </li>
                <li class="">
                  <a href="https://training.apim.eu/solutions/lab_gateway_08/">Lab Gateway 08 (Mixing
                    Authentications)</a>
                </li>
                <li class="active ">
                  <a href="https://training.apim.eu/solutions/lab_gateway_09/">Lab Gateway 09 (OpenID Connect)</a>
                </li>
                <li class="">
                  <a href="https://training.apim.eu/solutions/lab_gateway_10/">Lab Gateway 10 (Loadbalacing /
                    Upstreams)</a>
                </li>
                <li class="">
                  <a href="https://training.apim.eu/solutions/lab_gateway_11/">Lab Gateway 11 (Manipulating headers)</a>
                </li>
              </ul>
            </div>
          </div>
        </div>
        <div class="col-12 col-md-9">
          <h1 class="title">Lab Gateway 09 (OpenID Connect)</h1>
          <div class="content ">
            <h2 id="lab-solution">Lab Solution</h2>
            <p>Add route</p>
            <div class="highlight">
              <pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">http post localhost:8001/services/httpbin/routes name<span style="color:#f92672">=</span>oidc-route paths:<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;[&#34;/oidc&#34;]&#39;</span>
HTTP/1.1 <span style="color:#ae81ff">201</span> Created
Access-Control-Allow-Credentials: true
Access-Control-Allow-Origin: http://localhost:8002
Connection: keep-alive
Content-Length: <span style="color:#ae81ff">396</span>
Content-Type: application/json; charset<span style="color:#f92672">=</span>utf-8
Date: Mon, <span style="color:#ae81ff">09</span> Sep <span style="color:#ae81ff">2019</span> 08:12:45 GMT
Server: kong/0.36-2-enterprise-edition
Vary: Origin
X-Kong-Admin-Request-ID: oS7boPP0vf4ga7krZIOSu5GKqPKIDSWf
<span style="color:#f92672">{</span>
<span style="color:#e6db74">&#34;created_at&#34;</span>: 1568016765,
<span style="color:#e6db74">&#34;destinations&#34;</span>: null,
<span style="color:#e6db74">&#34;hosts&#34;</span>: null,
<span style="color:#e6db74">&#34;https_redirect_status_code&#34;</span>: 426,
<span style="color:#e6db74">&#34;id&#34;</span>: <span style="color:#e6db74">&#34;14a6add1-048d-403c-810e-436c0f4b9103&#34;</span>,
<span style="color:#e6db74">&#34;methods&#34;</span>: null,
<span style="color:#e6db74">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;oidc-route&#34;</span>,
<span style="color:#e6db74">&#34;paths&#34;</span>: <span style="color:#f92672">[</span>
<span style="color:#e6db74">&#34;/oidc&#34;</span>
<span style="color:#f92672">]</span>,
<span style="color:#e6db74">&#34;preserve_host&#34;</span>: false,
<span style="color:#e6db74">&#34;protocols&#34;</span>: <span style="color:#f92672">[</span>
<span style="color:#e6db74">&#34;http&#34;</span>,
<span style="color:#e6db74">&#34;https&#34;</span>
<span style="color:#f92672">]</span>,
<span style="color:#e6db74">&#34;regex_priority&#34;</span>: 0,
<span style="color:#e6db74">&#34;service&#34;</span>: <span style="color:#f92672">{</span>
<span style="color:#e6db74">&#34;id&#34;</span>: <span style="color:#e6db74">&#34;c6bafb59-cbf3-43d4-ad29-93d0be3f2eb8&#34;</span>
<span style="color:#f92672">}</span>,
<span style="color:#e6db74">&#34;snis&#34;</span>: null,
<span style="color:#e6db74">&#34;sources&#34;</span>: null,
<span style="color:#e6db74">&#34;strip_path&#34;</span>: true,
<span style="color:#e6db74">&#34;tags&#34;</span>: null,
<span style="color:#e6db74">&#34;updated_at&#34;</span>: <span style="color:#ae81ff">1568016765</span>
<span style="color:#f92672">}</span>
</code></pre>
            </div>
            <p>Add the plugin openid-connect to the route (hint: add -f to the httpie command so Data items from the
              command line are serialized as form fields)</p>
            <div class="highlight">
              <pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">http -f post localhost:8001/routes/oidc-route/plugins name<span style="color:#f92672">=</span>openid-connect <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  config.issuer<span style="color:#f92672">=</span>https://keycloak.apim.eu/auth/realms/kong/.well-known/openid-configuration <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  config.client_id<span style="color:#f92672">=</span>client1 <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  config.client_secret<span style="color:#f92672">=</span>aeb992d5-4be4-4125-857b-6210776321d2 <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  config.ssl_verify<span style="color:#f92672">=</span>false <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  config.verify_signature<span style="color:#f92672">=</span>false <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  config.redirect_uri<span style="color:#f92672">=</span>http://localhost:8000/oidc
HTTP/1.1 <span style="color:#ae81ff">201</span> Created
Access-Control-Allow-Credentials: true
Access-Control-Allow-Origin: http://localhost:8002
Connection: keep-alive
Content-Length: <span style="color:#ae81ff">5001</span>
Content-Type: application/json; charset<span style="color:#f92672">=</span>utf-8
Date: Mon, <span style="color:#ae81ff">09</span> Sep <span style="color:#ae81ff">2019</span> 08:18:56 GMT
Server: kong/0.36-2-enterprise-edition
Vary: Origin
X-Kong-Admin-Request-ID: VXxmqwowVUWAcYMy4WOY8HoBUSjnt5Jl
<span style="color:#f92672">{</span>
<span style="color:#e6db74">&#34;config&#34;</span>: <span style="color:#f92672">{</span>
<span style="color:#e6db74">&#34;anonymous&#34;</span>: null,
<span style="color:#e6db74">&#34;audience&#34;</span>: null,
<span style="color:#e6db74">&#34;audience_claim&#34;</span>: <span style="color:#f92672">[</span>
<span style="color:#e6db74">&#34;aud&#34;</span>
<span style="color:#f92672">]</span>,
<span style="color:#e6db74">&#34;audience_required&#34;</span>: null,
<span style="color:#e6db74">&#34;auth_methods&#34;</span>: <span style="color:#f92672">[</span>
<span style="color:#e6db74">&#34;password&#34;</span>,
<span style="color:#e6db74">&#34;client_credentials&#34;</span>,
<span style="color:#e6db74">&#34;authorization_code&#34;</span>,
<span style="color:#e6db74">&#34;bearer&#34;</span>,
<span style="color:#e6db74">&#34;introspection&#34;</span>,
<span style="color:#e6db74">&#34;kong_oauth2&#34;</span>,
<span style="color:#e6db74">&#34;refresh_token&#34;</span>,
<span style="color:#e6db74">&#34;session&#34;</span>
<span style="color:#f92672">]</span>,
<span style="color:#e6db74">&#34;authenticated_groups_claim&#34;</span>: null,
<span style="color:#e6db74">&#34;authorization_cookie_domain&#34;</span>: null,
<span style="color:#e6db74">&#34;authorization_cookie_httponly&#34;</span>: true,
<span style="color:#e6db74">&#34;authorization_cookie_lifetime&#34;</span>: 600,
<span style="color:#e6db74">&#34;authorization_cookie_name&#34;</span>: <span style="color:#e6db74">&#34;authorization&#34;</span>,
<span style="color:#e6db74">&#34;authorization_cookie_path&#34;</span>: <span style="color:#e6db74">&#34;/&#34;</span>,
<span style="color:#e6db74">&#34;authorization_cookie_samesite&#34;</span>: <span style="color:#e6db74">&#34;off&#34;</span>,
<span style="color:#e6db74">&#34;authorization_cookie_secure&#34;</span>: null,
<span style="color:#e6db74">&#34;authorization_endpoint&#34;</span>: null,
<span style="color:#e6db74">&#34;authorization_query_args_client&#34;</span>: null,
<span style="color:#e6db74">&#34;authorization_query_args_names&#34;</span>: null,
<span style="color:#e6db74">&#34;authorization_query_args_values&#34;</span>: null,
<span style="color:#e6db74">&#34;bearer_token_param_type&#34;</span>: <span style="color:#f92672">[</span>
<span style="color:#e6db74">&#34;header&#34;</span>,
<span style="color:#e6db74">&#34;query&#34;</span>,
<span style="color:#e6db74">&#34;body&#34;</span>
<span style="color:#f92672">]</span>,
<span style="color:#e6db74">&#34;cache_introspection&#34;</span>: true,
<span style="color:#e6db74">&#34;cache_token_exchange&#34;</span>: true,
<span style="color:#e6db74">&#34;cache_tokens&#34;</span>: true,
<span style="color:#e6db74">&#34;cache_ttl&#34;</span>: 3600,
<span style="color:#e6db74">&#34;cache_ttl_max&#34;</span>: null,
<span style="color:#e6db74">&#34;cache_ttl_min&#34;</span>: null,
<span style="color:#e6db74">&#34;cache_ttl_neg&#34;</span>: null,
<span style="color:#e6db74">&#34;cache_ttl_resurrect&#34;</span>: null,
<span style="color:#e6db74">&#34;cache_user_info&#34;</span>: true,
<span style="color:#e6db74">&#34;client_arg&#34;</span>: <span style="color:#e6db74">&#34;client_id&#34;</span>,
<span style="color:#e6db74">&#34;client_credentials_param_type&#34;</span>: <span style="color:#f92672">[</span>
<span style="color:#e6db74">&#34;header&#34;</span>,
<span style="color:#e6db74">&#34;query&#34;</span>,
<span style="color:#e6db74">&#34;body&#34;</span>
<span style="color:#f92672">]</span>,
<span style="color:#e6db74">&#34;client_id&#34;</span>: <span style="color:#f92672">[</span>
<span style="color:#e6db74">&#34;client1&#34;</span>
<span style="color:#f92672">]</span>,
<span style="color:#e6db74">&#34;client_secret&#34;</span>: <span style="color:#f92672">[</span>
<span style="color:#e6db74">&#34;aeb992d5-4be4-4125-857b-6210776321d2&#34;</span>
<span style="color:#f92672">]</span>,
<span style="color:#e6db74">&#34;consumer_by&#34;</span>: <span style="color:#f92672">[</span>
<span style="color:#e6db74">&#34;username&#34;</span>,
<span style="color:#e6db74">&#34;custom_id&#34;</span>
<span style="color:#f92672">]</span>,
<span style="color:#e6db74">&#34;consumer_claim&#34;</span>: null,
<span style="color:#e6db74">&#34;consumer_optional&#34;</span>: false,
<span style="color:#e6db74">&#34;credential_claim&#34;</span>: <span style="color:#f92672">[</span>
<span style="color:#e6db74">&#34;sub&#34;</span>
<span style="color:#f92672">]</span>,
<span style="color:#e6db74">&#34;discovery_headers_names&#34;</span>: null,
<span style="color:#e6db74">&#34;discovery_headers_values&#34;</span>: null,
<span style="color:#e6db74">&#34;domains&#34;</span>: null,
<span style="color:#e6db74">&#34;downstream_access_token_header&#34;</span>: null,
<span style="color:#e6db74">&#34;downstream_access_token_jwk_header&#34;</span>: null,
<span style="color:#e6db74">&#34;downstream_headers_claims&#34;</span>: null,
<span style="color:#e6db74">&#34;downstream_headers_names&#34;</span>: null,
<span style="color:#e6db74">&#34;downstream_id_token_header&#34;</span>: null,
<span style="color:#e6db74">&#34;downstream_id_token_jwk_header&#34;</span>: null,
<span style="color:#e6db74">&#34;downstream_introspection_header&#34;</span>: null,
<span style="color:#e6db74">&#34;downstream_refresh_token_header&#34;</span>: null,
<span style="color:#e6db74">&#34;downstream_session_id_header&#34;</span>: null,
<span style="color:#e6db74">&#34;downstream_user_info_header&#34;</span>: null,
<span style="color:#e6db74">&#34;end_session_endpoint&#34;</span>: null,
<span style="color:#e6db74">&#34;extra_jwks_uris&#34;</span>: null,
<span style="color:#e6db74">&#34;forbidden_destroy_session&#34;</span>: true,
<span style="color:#e6db74">&#34;forbidden_error_message&#34;</span>: <span style="color:#e6db74">&#34;Forbidden&#34;</span>,
<span style="color:#e6db74">&#34;forbidden_redirect_uri&#34;</span>: null,
<span style="color:#e6db74">&#34;hide_credentials&#34;</span>: false,
<span style="color:#e6db74">&#34;http_proxy&#34;</span>: null,
<span style="color:#e6db74">&#34;http_proxy_authorization&#34;</span>: null,
<span style="color:#e6db74">&#34;http_version&#34;</span>: 1.1,
<span style="color:#e6db74">&#34;https_proxy&#34;</span>: null,
<span style="color:#e6db74">&#34;https_proxy_authorization&#34;</span>: null,
<span style="color:#e6db74">&#34;id_token_param_name&#34;</span>: null,
<span style="color:#e6db74">&#34;id_token_param_type&#34;</span>: <span style="color:#f92672">[</span>
<span style="color:#e6db74">&#34;header&#34;</span>,
<span style="color:#e6db74">&#34;query&#34;</span>,
<span style="color:#e6db74">&#34;body&#34;</span>
<span style="color:#f92672">]</span>,
<span style="color:#e6db74">&#34;ignore_signature&#34;</span>: <span style="color:#f92672">[]</span>,
<span style="color:#e6db74">&#34;introspect_jwt_tokens&#34;</span>: false,
<span style="color:#e6db74">&#34;introspection_endpoint&#34;</span>: null,
<span style="color:#e6db74">&#34;introspection_headers_names&#34;</span>: null,
<span style="color:#e6db74">&#34;introspection_headers_values&#34;</span>: null,
<span style="color:#e6db74">&#34;introspection_hint&#34;</span>: <span style="color:#e6db74">&#34;access_token&#34;</span>,
<span style="color:#e6db74">&#34;introspection_post_args_names&#34;</span>: null,
<span style="color:#e6db74">&#34;introspection_post_args_values&#34;</span>: null,
<span style="color:#e6db74">&#34;issuer&#34;</span>: <span style="color:#e6db74">&#34;https://keycloak.apim.eu/auth/realms/kong&#34;</span>,
<span style="color:#e6db74">&#34;jwt_session_claim&#34;</span>: <span style="color:#e6db74">&#34;sid&#34;</span>,
<span style="color:#e6db74">&#34;jwt_session_cookie&#34;</span>: null,
<span style="color:#e6db74">&#34;keepalive&#34;</span>: true,
<span style="color:#e6db74">&#34;leeway&#34;</span>: 0,
<span style="color:#e6db74">&#34;login_action&#34;</span>: <span style="color:#e6db74">&#34;upstream&#34;</span>,
<span style="color:#e6db74">&#34;login_methods&#34;</span>: <span style="color:#f92672">[</span>
<span style="color:#e6db74">&#34;authorization_code&#34;</span>
<span style="color:#f92672">]</span>,
<span style="color:#e6db74">&#34;login_redirect_mode&#34;</span>: <span style="color:#e6db74">&#34;fragment&#34;</span>,
<span style="color:#e6db74">&#34;login_redirect_uri&#34;</span>: null,
<span style="color:#e6db74">&#34;login_tokens&#34;</span>: <span style="color:#f92672">[</span>
<span style="color:#e6db74">&#34;id_token&#34;</span>
<span style="color:#f92672">]</span>,
<span style="color:#e6db74">&#34;logout_methods&#34;</span>: <span style="color:#f92672">[</span>
<span style="color:#e6db74">&#34;POST&#34;</span>,
<span style="color:#e6db74">&#34;DELETE&#34;</span>
<span style="color:#f92672">]</span>,
<span style="color:#e6db74">&#34;logout_post_arg&#34;</span>: null,
<span style="color:#e6db74">&#34;logout_query_arg&#34;</span>: null,
<span style="color:#e6db74">&#34;logout_redirect_uri&#34;</span>: null,
<span style="color:#e6db74">&#34;logout_revoke&#34;</span>: false,
<span style="color:#e6db74">&#34;logout_revoke_access_token&#34;</span>: true,
<span style="color:#e6db74">&#34;logout_revoke_refresh_token&#34;</span>: true,
<span style="color:#e6db74">&#34;logout_uri_suffix&#34;</span>: null,
<span style="color:#e6db74">&#34;max_age&#34;</span>: null,
<span style="color:#e6db74">&#34;no_proxy&#34;</span>: null,
<span style="color:#e6db74">&#34;password_param_type&#34;</span>: <span style="color:#f92672">[</span>
<span style="color:#e6db74">&#34;header&#34;</span>,
<span style="color:#e6db74">&#34;query&#34;</span>,
<span style="color:#e6db74">&#34;body&#34;</span>
<span style="color:#f92672">]</span>,
<span style="color:#e6db74">&#34;redirect_uri&#34;</span>: null,
<span style="color:#e6db74">&#34;rediscovery_lifetime&#34;</span>: 300,
<span style="color:#e6db74">&#34;refresh_token_param_name&#34;</span>: null,
<span style="color:#e6db74">&#34;refresh_token_param_type&#34;</span>: <span style="color:#f92672">[</span>
<span style="color:#e6db74">&#34;header&#34;</span>,
<span style="color:#e6db74">&#34;query&#34;</span>,
<span style="color:#e6db74">&#34;body&#34;</span>
<span style="color:#f92672">]</span>,
<span style="color:#e6db74">&#34;refresh_tokens&#34;</span>: true,
<span style="color:#e6db74">&#34;response_mode&#34;</span>: <span style="color:#e6db74">&#34;query&#34;</span>,
<span style="color:#e6db74">&#34;response_type&#34;</span>: <span style="color:#f92672">[</span>
<span style="color:#e6db74">&#34;code&#34;</span>
<span style="color:#f92672">]</span>,
<span style="color:#e6db74">&#34;reverify&#34;</span>: false,
<span style="color:#e6db74">&#34;revocation_endpoint&#34;</span>: null,
<span style="color:#e6db74">&#34;run_on_preflight&#34;</span>: true,
<span style="color:#e6db74">&#34;scopes&#34;</span>: <span style="color:#f92672">[</span>
<span style="color:#e6db74">&#34;openid&#34;</span>
<span style="color:#f92672">]</span>,
<span style="color:#e6db74">&#34;scopes_claim&#34;</span>: <span style="color:#f92672">[</span>
<span style="color:#e6db74">&#34;scope&#34;</span>
<span style="color:#f92672">]</span>,
<span style="color:#e6db74">&#34;scopes_required&#34;</span>: null,
<span style="color:#e6db74">&#34;search_user_info&#34;</span>: false,
<span style="color:#e6db74">&#34;session_cookie_domain&#34;</span>: null,
<span style="color:#e6db74">&#34;session_cookie_httponly&#34;</span>: true,
<span style="color:#e6db74">&#34;session_cookie_lifetime&#34;</span>: 3600,
<span style="color:#e6db74">&#34;session_cookie_name&#34;</span>: <span style="color:#e6db74">&#34;session&#34;</span>,
<span style="color:#e6db74">&#34;session_cookie_path&#34;</span>: <span style="color:#e6db74">&#34;/&#34;</span>,
<span style="color:#e6db74">&#34;session_cookie_renew&#34;</span>: 600,
<span style="color:#e6db74">&#34;session_cookie_samesite&#34;</span>: <span style="color:#e6db74">&#34;Lax&#34;</span>,
<span style="color:#e6db74">&#34;session_cookie_secure&#34;</span>: null,
<span style="color:#e6db74">&#34;session_memcache_host&#34;</span>: <span style="color:#e6db74">&#34;127.0.0.1&#34;</span>,
<span style="color:#e6db74">&#34;session_memcache_port&#34;</span>: 11211,
<span style="color:#e6db74">&#34;session_memcache_prefix&#34;</span>: <span style="color:#e6db74">&#34;sessions&#34;</span>,
<span style="color:#e6db74">&#34;session_memcache_socket&#34;</span>: null,
<span style="color:#e6db74">&#34;session_redis_auth&#34;</span>: null,
<span style="color:#e6db74">&#34;session_redis_host&#34;</span>: <span style="color:#e6db74">&#34;127.0.0.1&#34;</span>,
<span style="color:#e6db74">&#34;session_redis_port&#34;</span>: 6379,
<span style="color:#e6db74">&#34;session_redis_prefix&#34;</span>: <span style="color:#e6db74">&#34;sessions&#34;</span>,
<span style="color:#e6db74">&#34;session_redis_socket&#34;</span>: null,
<span style="color:#e6db74">&#34;session_secret&#34;</span>: null,
<span style="color:#e6db74">&#34;session_storage&#34;</span>: <span style="color:#e6db74">&#34;cookie&#34;</span>,
<span style="color:#e6db74">&#34;ssl_verify&#34;</span>: false,
<span style="color:#e6db74">&#34;timeout&#34;</span>: 10000,
<span style="color:#e6db74">&#34;token_endpoint&#34;</span>: null,
<span style="color:#e6db74">&#34;token_endpoint_auth_method&#34;</span>: null,
<span style="color:#e6db74">&#34;token_exchange_endpoint&#34;</span>: null,
<span style="color:#e6db74">&#34;token_headers_client&#34;</span>: null,
<span style="color:#e6db74">&#34;token_headers_grants&#34;</span>: null,
<span style="color:#e6db74">&#34;token_headers_names&#34;</span>: null,
<span style="color:#e6db74">&#34;token_headers_prefix&#34;</span>: null,
<span style="color:#e6db74">&#34;token_headers_replay&#34;</span>: null,
<span style="color:#e6db74">&#34;token_headers_values&#34;</span>: null,
<span style="color:#e6db74">&#34;token_post_args_client&#34;</span>: null,
<span style="color:#e6db74">&#34;token_post_args_names&#34;</span>: null,
<span style="color:#e6db74">&#34;token_post_args_values&#34;</span>: null,
<span style="color:#e6db74">&#34;unauthorized_error_message&#34;</span>: <span style="color:#e6db74">&#34;Unauthorized&#34;</span>,
<span style="color:#e6db74">&#34;unauthorized_redirect_uri&#34;</span>: null,
<span style="color:#e6db74">&#34;unexpected_redirect_uri&#34;</span>: null,
<span style="color:#e6db74">&#34;upstream_access_token_header&#34;</span>: <span style="color:#e6db74">&#34;authorization:bearer&#34;</span>,
<span style="color:#e6db74">&#34;upstream_access_token_jwk_header&#34;</span>: null,
<span style="color:#e6db74">&#34;upstream_headers_claims&#34;</span>: null,
<span style="color:#e6db74">&#34;upstream_headers_names&#34;</span>: null,
<span style="color:#e6db74">&#34;upstream_id_token_header&#34;</span>: null,
<span style="color:#e6db74">&#34;upstream_id_token_jwk_header&#34;</span>: null,
<span style="color:#e6db74">&#34;upstream_introspection_header&#34;</span>: null,
<span style="color:#e6db74">&#34;upstream_refresh_token_header&#34;</span>: null,
<span style="color:#e6db74">&#34;upstream_session_id_header&#34;</span>: null,
<span style="color:#e6db74">&#34;upstream_user_info_header&#34;</span>: null,
<span style="color:#e6db74">&#34;verify_claims&#34;</span>: true,
<span style="color:#e6db74">&#34;verify_nonce&#34;</span>: true,
<span style="color:#e6db74">&#34;verify_parameters&#34;</span>: true,
<span style="color:#e6db74">&#34;verify_signature&#34;</span>: false
<span style="color:#f92672">}</span>,
<span style="color:#e6db74">&#34;consumer&#34;</span>: null,
<span style="color:#e6db74">&#34;created_at&#34;</span>: 1568017136,
<span style="color:#e6db74">&#34;enabled&#34;</span>: true,
<span style="color:#e6db74">&#34;id&#34;</span>: <span style="color:#e6db74">&#34;bd1217c3-dfba-443c-b7e5-d437a155040d&#34;</span>,
<span style="color:#e6db74">&#34;name&#34;</span>: <span style="color:#e6db74">&#34;openid-connect&#34;</span>,
<span style="color:#e6db74">&#34;protocols&#34;</span>: <span style="color:#f92672">[</span>
<span style="color:#e6db74">&#34;http&#34;</span>,
<span style="color:#e6db74">&#34;https&#34;</span>
<span style="color:#f92672">]</span>,
<span style="color:#e6db74">&#34;route&#34;</span>: <span style="color:#f92672">{</span>
<span style="color:#e6db74">&#34;id&#34;</span>: <span style="color:#e6db74">&#34;14a6add1-048d-403c-810e-436c0f4b9103&#34;</span>
<span style="color:#f92672">}</span>,
<span style="color:#e6db74">&#34;run_on&#34;</span>: <span style="color:#e6db74">&#34;first&#34;</span>,
<span style="color:#e6db74">&#34;service&#34;</span>: null,
<span style="color:#e6db74">&#34;tags&#34;</span>: null
<span style="color:#f92672">}</span>
</code></pre>
            </div>
            <p>Add a consumer matching the one in Keycloak:</p>
            <div class="highlight">
              <pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">&gt; http post localhost:8001/consumers username<span style="color:#f92672">=</span>training@apim.eu
HTTP/1.1 <span style="color:#ae81ff">201</span> Created
Access-Control-Allow-Credentials: true
Access-Control-Allow-Origin: http://localhost:8002
Connection: keep-alive
Content-Length: <span style="color:#ae81ff">131</span>
Content-Type: application/json; charset<span style="color:#f92672">=</span>utf-8
Date: Sun, <span style="color:#ae81ff">08</span> Sep <span style="color:#ae81ff">2019</span> 18:45:39 GMT
Server: kong/0.36-2-enterprise-edition
Vary: Origin
X-Kong-Admin-Request-ID: pi1z42gQ0dAqmuoQlhIqZuU9ZL2FYV4t
<span style="color:#f92672">{</span>
<span style="color:#e6db74">&#34;created_at&#34;</span>: 1567968339,
<span style="color:#e6db74">&#34;custom_id&#34;</span>: null,
<span style="color:#e6db74">&#34;id&#34;</span>: <span style="color:#e6db74">&#34;e246c2ca-f4d2-4ea8-b799-4b7f1de40ec8&#34;</span>,
<span style="color:#e6db74">&#34;tags&#34;</span>: null,
<span style="color:#e6db74">&#34;type&#34;</span>: 0,
<span style="color:#e6db74">&#34;username&#34;</span>: <span style="color:#e6db74">&#34;training@apim.eu&#34;</span>
<span style="color:#f92672">}</span>
</code></pre>
            </div>
            <p><strong>Verify:</strong> Use your browser and navigate to <a
                href="http://localhost:8000/oidc">http://localhost:8000/oidc</a> (you will be redirected to the keycloak
              login page)</p>
          </div>
        </div>
      </div>
    </div>
  </div>
  </div>
  <div class="sub-footer">
    <div class="container">
      <div class="row">
        <div class="col-12">
          <div class="sub-footer-inner">
            <ul>
              <li class="zerostatic"><a href="https://konghq.com">&copy; Kong, Inc.</a></li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script type="text/javascript"
    src="/js/scripts.min.eaf147370baecdd07c022597db631f99cab1c9cd6479de586f30327a568d6a0f.js"></script>
</body>

</html>